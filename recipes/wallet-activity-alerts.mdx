---
title: Set Up Wallet Activity Alerts
description: Use transaction subscriptions (webhooks) to get notified when a wallet sends or receives tokens.
---

This recipe shows how to create a webhook subscription that sends you a notification whenever a wallet has a new transaction — without polling the API.

## Prerequisites

- A Zerion API key ([get one here](https://developers.zerion.io))
- A publicly accessible callback URL to receive webhook notifications (you can use [webhook.site](https://webhook.site) for testing)

<Note>
For production use, contact api@zerion.io to whitelist your callback URL.
Dev keys are limited to 1 subscription with a maximum of 5 wallets, valid for one week.
</Note>

## Steps

<Steps>

### Create a subscription

Subscribe to transactions for one or more wallet addresses.

<CodeGroup>

```bash cURL
curl -u "YOUR_API_KEY:" \
  -X POST "https://api.zerion.io/v1/tx-subscriptions/" \
  -H "Content-Type: application/json" \
  -d '{
    "callback_url": "https://webhook.site/your-unique-id",
    "addresses": [
      "0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045"
    ],
    "chain_ids": ["ethereum", "optimism", "base"]
  }'
```

```javascript JavaScript
const apiKey = "YOUR_API_KEY";
const encoded = btoa(`${apiKey}:`);

const response = await fetch("https://api.zerion.io/v1/tx-subscriptions/", {
  method: "POST",
  headers: {
    Authorization: `Basic ${encoded}`,
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    callback_url: "https://webhook.site/your-unique-id",
    addresses: ["0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045"],
    chain_ids: ["ethereum", "optimism", "base"],
  }),
});

const { data } = await response.json();
console.log("Subscription ID:", data.id);
```

```python Python
import requests

api_key = "YOUR_API_KEY"

response = requests.post(
    "https://api.zerion.io/v1/tx-subscriptions/",
    json={
        "callback_url": "https://webhook.site/your-unique-id",
        "addresses": ["0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045"],
        "chain_ids": ["ethereum", "optimism", "base"],
    },
    auth=(api_key, ""),
)

data = response.json()["data"]
print("Subscription ID:", data["id"])
```

</CodeGroup>

- `chain_ids` is optional — omit it to subscribe to all supported chains
- Save the subscription `id` from the response for management later

### Handle incoming webhooks

When a transaction occurs, Zerion sends a POST request to your callback URL. Here's what the payload looks like and how to process it.

```javascript Express.js
const express = require("express");
const app = express();
app.use(express.json());

app.post("/webhook", (req, res) => {
  const { data, included } = req.body;

  // data contains the notification metadata
  console.log("Notification ID:", data.id);
  console.log("Wallet:", data.attributes.address);
  console.log("Timestamp:", data.attributes.timestamp);

  // included contains the full transaction object(s)
  for (const tx of included) {
    const { operation_type, transfers, fee, mined_at } = tx.attributes;
    const chain = tx.relationships.chain.data.id;

    console.log(`${operation_type} on ${chain} at ${mined_at}`);
    for (const transfer of transfers) {
      const symbol = transfer.fungible_info?.symbol || "NFT";
      const direction = transfer.direction === "out" ? "Sent" : "Received";
      console.log(`  ${direction} ${transfer.quantity.float} ${symbol}`);
    }
  }

  res.sendStatus(200);
});

app.listen(3000);
```

<Warning>
Transaction prices in webhook notifications are always `null`. To get USD values, query the transactions endpoint by hash after receiving the notification.
</Warning>

### Verify webhook signatures

Verify that incoming webhooks are genuinely from Zerion by checking the signature headers.

```javascript
const crypto = require("crypto");

function verifyWebhook(req) {
  const timestamp = req.headers["x-timestamp"];
  const signature = req.headers["x-signature"];
  const certUrl = req.headers["x-certificate-url"];

  // 1. Fetch the public certificate from certUrl
  // 2. Build the signed message
  const message = `${timestamp}\n${JSON.stringify(req.body)}\n`;

  // 3. Verify using the certificate's public key
  const verifier = crypto.createVerify("SHA256");
  verifier.update(message);
  const isValid = verifier.verify(publicKey, signature, "base64");

  return isValid;
}
```

### Manage your subscription

List, update, or delete subscriptions as needed.

```bash
# List all subscriptions
curl -u "YOUR_API_KEY:" \
  "https://api.zerion.io/v1/tx-subscriptions/"

# Add or remove wallets from a subscription
curl -u "YOUR_API_KEY:" \
  -X PATCH "https://api.zerion.io/v1/tx-subscriptions/SUBSCRIPTION_ID/wallets" \
  -H "Content-Type: application/json" \
  -d '{
    "addresses": ["0xNEW_ADDRESS_TO_ADD"]
  }'

# Delete a subscription
curl -u "YOUR_API_KEY:" \
  -X DELETE "https://api.zerion.io/v1/tx-subscriptions/SUBSCRIPTION_ID"
```

</Steps>

## Important notes

- **Delivery is not guaranteed** — if delivery fails 3 times, no further attempts are made. Build your system to handle missed notifications.
- **Order is not guaranteed** — webhook notifications may arrive out of order relative to on-chain transactions.
- **Dev key limits** — 1 subscription, max 5 wallets, expires after 1 week.
- **Production keys** — unlimited duration, up to 100 addresses per subscription.

## Next steps

- Combine with the [transaction history recipe](/recipes/transaction-history) to fetch full details (including prices) for flagged transactions
- Use `chain_ids` to focus on specific chains and reduce noise
- Build a notification service that forwards alerts to Slack, Discord, email, or push notifications
